# éšæœºä¸€è¨€å¤è¯—è¯ API æ–‡æ¡£

## æ¦‚è¿°

éšæœºä¸€è¨€å¤è¯—è¯ API æä¾›äº†è·å–éšæœºä¸€è¨€æˆ–å¤è¯—è¯çš„åŠŸèƒ½ï¼Œä¸ºåº”ç”¨æä¾›çµæ„Ÿå’Œæ–‡åŒ–å†…å®¹ã€‚è¯¥æ¥å£åŸºäºç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œæä¾›å¿«é€Ÿå“åº”å’Œä¸°å¯Œçš„å†…å®¹åº“ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **ç²¾å‡†å®šä½**: å¯å®šä½åˆ°å¿çº§è¡Œæ”¿åŒº
- ğŸŒ **å…¨çƒè¦†ç›–**: æ”¯æŒå›½å†…å¤– IP åœ°å€æŸ¥è¯¢
- âš¡ **å¿«é€Ÿå“åº”**: åŸºäºæœ¬åœ°æ•°æ®å®ç°é«˜æ•ˆæŸ¥è¯¢
- ğŸ“Š **è¯¦ç»†ä¿¡æ¯**: åŒ…å«åœ°ç†ä½ç½®ã€è¿è¥å•†ã€ç»çº¬åº¦ç­‰å®Œæ•´ä¿¡æ¯

## API ç«¯ç‚¹

### éšæœºä¸€è¨€å¤è¯—è¯

**ç«¯ç‚¹**: `GET /api/network/yiyan`

**æè¿°**: è·å–éšæœºçš„ä¸€è¨€æˆ–å¤è¯—è¯å†…å®¹

**å‚æ•°**:

| å‚æ•°å | ç±»å‹   | å¿…ä¼  | è¯´æ˜                                           |
| ------ | ------ | ---- | ---------------------------------------------- |
| type   | string | æ˜¯   | è¿”å›ç±»å‹ï¼š`hitokoto`(ä¸€è¨€) æˆ– `poetry`(å¤è¯—è¯) |

**è¯·æ±‚ç¤ºä¾‹**:

```bash
# è·å–éšæœºä¸€è¨€
curl "http://localhost:3000/api/network/yiyan?type=hitokoto"

# è·å–éšæœºå¤è¯—è¯
curl "http://localhost:3000/api/network/yiyan?type=poetry"
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "success": true,
  "message": "éšæœºä¸€è¨€å¤è¯—è¯è·å–å®Œæˆ",
  "data": {
    "code": "200",
    "data": "å’Œç‹ä½ä»€ä¹ˆçš„æ— å…³ï¼Œæˆ‘åªä¸ºäº†è¿™ä½æ®¿ä¸‹æœ¬äººè€ŒæŒ¥å‰‘ã€‚",
    "msg": "æ•°æ®è¯·æ±‚æˆåŠŸ"
  }
}
```

**é”™è¯¯å“åº”ç¤ºä¾‹**:

```json
{
  "success": false,
  "error": "ç±»å‹å‚æ•°å¿…é¡»æ˜¯ hitokoto(ä¸€è¨€) æˆ– poetry(å¤è¯—è¯)"
}
```

## ä½¿ç”¨åœºæ™¯

### 1. ç½‘ç«™é¦–é¡µå±•ç¤º

```javascript
// åœ¨ç½‘ç«™é¦–é¡µæ˜¾ç¤ºæ¯æ—¥ä¸€è¨€
fetch("/api/network/yiyan?type=hitokoto")
  .then((response) => response.json())
  .then((data) => {
    if (data.success) {
      document.getElementById("daily-quote").textContent = data.data.data;
    }
  });
```

### 2. ç§»åŠ¨åº”ç”¨å¯åŠ¨é¡µ

```javascript
// åº”ç”¨å¯åŠ¨æ—¶æ˜¾ç¤ºéšæœºå¤è¯—è¯
fetch("/api/network/yiyan?type=poetry")
  .then((response) => response.json())
  .then((data) => {
    if (data.success) {
      showSplashScreen(data.data.data);
    }
  });
```

### 3. ç¤¾äº¤åª’ä½“åˆ†äº«

```javascript
// ç”Ÿæˆåˆ†äº«å†…å®¹
async function generateShareContent() {
  const response = await fetch("/api/network/yiyan?type=hitokoto");
  const data = await response.json();

  if (data.success) {
    return `ä»Šæ—¥ä¸€è¨€ï¼š${data.data.data}`;
  }
  return "ä»Šæ—¥ä¸€è¨€è·å–å¤±è´¥";
}
```

## é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯ç 

| çŠ¶æ€ç  | è¯´æ˜       | è§£å†³æ–¹æ¡ˆ               |
| ------ | ---------- | ---------------------- |
| 400    | å‚æ•°é”™è¯¯   | æ£€æŸ¥ type å‚æ•°æ˜¯å¦æ­£ç¡® |
| 500    | æœåŠ¡å™¨é”™è¯¯ | ç¨åé‡è¯•æˆ–è”ç³»ç®¡ç†å‘˜   |

### é”™è¯¯å¤„ç†ç¤ºä¾‹

```javascript
async function getRandomQuote(type) {
  try {
    const response = await fetch(`/api/network/yiyan?type=${type}`);
    const data = await response.json();

    if (data.success) {
      return data.data.data;
    } else {
      console.error("è·å–å¤±è´¥:", data.error);
      return "è·å–å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•";
    }
  } catch (error) {
    console.error("ç½‘ç»œé”™è¯¯:", error);
    return "ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥è¿æ¥";
  }
}
```

## é™æµè§„åˆ™

- **æ™®é€šç”¨æˆ·**: æ¯åˆ†é’Ÿæœ€å¤š 30 æ¬¡è¯·æ±‚
- **æœ¬åœ° IP**: ä¸å—é™æµé™åˆ¶
- **è¶…å‡ºé™åˆ¶**: è¿”å› 429 çŠ¶æ€ç 

## æµ‹è¯•

### è¿è¡Œå®Œæ•´æµ‹è¯•

```bash
# æµ‹è¯•æ‰€æœ‰ç½‘ç»œAPIï¼ˆåŒ…æ‹¬ä¸€è¨€å¤è¯—è¯ï¼‰
node scripts/test-network-apis.js

# ä¸“é—¨æµ‹è¯•ä¸€è¨€å¤è¯—è¯åŠŸèƒ½
node scripts/test-yiyan.js
```

### æ‰‹åŠ¨æµ‹è¯•

```bash
# æµ‹è¯•ä¸€è¨€
curl "http://localhost:3000/api/network/yiyan?type=hitokoto"

# æµ‹è¯•å¤è¯—è¯
curl "http://localhost:3000/api/network/yiyan?type=poetry"

# æµ‹è¯•é”™è¯¯å‚æ•°
curl "http://localhost:3000/api/network/yiyan?type=invalid"
```

## æ³¨æ„äº‹é¡¹

1. **å†…å®¹éšæœºæ€§**: æ¯æ¬¡è¯·æ±‚è¿”å›çš„å†…å®¹éƒ½æ˜¯éšæœºçš„
2. **å†…å®¹è´¨é‡**: å†…å®¹æ¥æºäºç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œè´¨é‡æœ‰ä¿éšœ
3. **å“åº”æ—¶é—´**: é€šå¸¸åœ¨ 1-3 ç§’å†…å“åº”
4. **ç¼“å­˜å»ºè®®**: å»ºè®®åœ¨å®¢æˆ·ç«¯é€‚å½“ç¼“å­˜ï¼Œé¿å…é¢‘ç¹è¯·æ±‚
5. **ä½¿ç”¨åœºæ™¯**: é€‚ç”¨äºç½‘ç«™è£…é¥°ã€åº”ç”¨å¯åŠ¨é¡µã€ç¤¾äº¤åª’ä½“åˆ†äº«ç­‰

## éƒ¨ç½²è¦æ±‚

1. **ç½‘ç»œè¿æ¥**: ç¡®ä¿æœåŠ¡å™¨èƒ½å¤Ÿè®¿é—® `https://v2.xxapi.cn`
2. **ä¾èµ–**: é¡¹ç›®å·²åŒ…å«æ‰€éœ€ä¾èµ–
3. **é˜²ç«å¢™**: ç¡®ä¿æ²¡æœ‰é˜»æ­¢å¤–éƒ¨ç½‘ç»œè¯·æ±‚
4. **ç›‘æ§**: å»ºè®®ç›‘æ§ API ä½¿ç”¨æƒ…å†µå’Œé”™è¯¯ç‡

## æ‰©å±•åŠŸèƒ½

æœªæ¥å¯ä»¥è€ƒè™‘æ·»åŠ çš„åŠŸèƒ½ï¼š

1. æ›´å¤šå†…å®¹ç±»å‹ï¼ˆåè¨€è­¦å¥ã€è¯—è¯é‰´èµç­‰ï¼‰
2. æŒ‰ä¸»é¢˜åˆ†ç±»ï¼ˆçˆ±æƒ…ã€åŠ±å¿—ã€å“²ç†ç­‰ï¼‰
3. å¤šè¯­è¨€æ”¯æŒ
4. å†…å®¹æ”¶è—åŠŸèƒ½
5. ä¸ªæ€§åŒ–æ¨è

## æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£ã€‚
